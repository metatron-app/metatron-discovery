<!--
  ~ Licensed under the Apache License, Version 2.0 (the "License");
  ~ you may not use this file except in compliance with the License.
  ~ You may obtain a copy of the License at
  ~
  ~      http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" BASIS,
  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~ See the License for the specific language governing permissions and
  ~ limitations under the License.
  -->
<div class="ddp-layout-popuptype" *ngIf="isShow">
  <em class="ddp-bg-popup"></em>
  <div class="ddp-ui-popup">
    <div class="ddp-ui-popup-title">
      <span class="ddp-txt-title-name">Edit Rule</span>
    </div>
    <div class="ddp-pop-schema">
      <div class="ddp-pop-in">
        <!-- Contents Title -->
        <div class="ddp-pop-head">
          <span class="ddp-pop-name">Rule ({{datasourceCopyRule.length}})</span>
          <div class="ddp-ui-pop-buttons">
            <a href="javascript:" class="ddp-btn-pop ddp-dark" (click)="addRule()">Add rule</a>
            <a href="javascript:" class="ddp-btn-pop" (click)="close()">{{ 'msg.comm.btn.cancl' | translate }}</a>
            <a href="javascript:" class="ddp-btn-pop ddp-bg-black" (click)="done()">{{ 'msg.comm.btn.done' | translate }}</a>
          </div>
        </div>
        <!-- // Contents Title -->
        <div class="ddp-form-table" >
          <!-- Select Role -->
          <table class="ddp-table-list2" *ngFor="let rule of datasourceCopyRule; let i = index;">
            <colgroup>
              <col width="20%">
              <col width="60%">
              <col width="20%">
            </colgroup>
            <thead>
            <tr>
              <th colspan="3">
                Rule #{{i + 1}}
                <a href="javascript:" class="ddp-link-edit" (click)="deleteRule(i)">
                  <em class="ddp-icon-edit"></em>Delete
                </a>
              </th>
            </tr>
            </thead>
            <tbody>
            <tr>
              <td>
                <span class="ddp-name">Type</span>
              </td>
              <td colspan="2">
                <!-- selectbox -->
                <div class="ddp-type-selectbox" [class.ddp-selected]="rule.selectBox"
                     (click)="rule.selectBox = !rule.selectBox">
                  <span class="ddp-txt-selectbox">{{ rule.type ? rule.type : 'Select Type'}}</span>
                  <div class="ddp-wrap-popup2">
                    <ul class="ddp-list-popup">
                      <li *ngFor="let selectRule of ruleTypeList"
                          [class.ddp-selected]="rule.type && rule.type === selectRule"
                          (click)="onClickRule(selectRule, rule)">
                        <a href="javascript:">{{selectRule}}<em class="ddp-icon-check"></em></a>
                      </li>
                    </ul>
                  </div>
                </div>
                <!-- //selectbox -->
              </td>
            </tr>
            <tr *ngIf="rule.type && rule.type.indexOf('Forever') < 0">
              <td>
                <span class="ddp-name">{{rule.type.indexOf('Period') > -1 ? 'Period' : 'Interval'}}</span>
              </td>
              <td>
                <component-input
                [value]="rule.type.indexOf('Period') > -1 ? rule.period : rule.interval"
                [inputClass]="'ddp-input-typebasic'"
                [immediately]="true"
                (changeValue)="onChangedDuration($event, rule);"></component-input>
              </td>
              <td>
                {{rule.durationString}}
              </td>
            </tr>
            </tbody>
          </table>
          <!-- // Select Role -->
        </div>
      </div>
    </div>
  </div>
</div>
